[gd_scene load_steps=28 format=3 uid="uid://ufmsrk8yynj3"]

[ext_resource type="Script" path="res://Scripts/inspection_frame.gd" id="1_qncd1"]
[ext_resource type="Material" uid="uid://bn5thx7h4m463" path="res://Materials/checkerboard_dark.tres" id="2_j3l1x"]
[ext_resource type="PackedScene" uid="uid://y3fhbrp47ptv" path="res://Scenes/oscilloscope.tscn" id="3_38jeh"]
[ext_resource type="Texture2D" uid="uid://ch2qjlipgc2lg" path="res://Materials/Textures/tool_tray.png" id="3_gjsx4"]
[ext_resource type="Texture2D" uid="uid://h2r2eqrf7s1y" path="res://Materials/Textures/arrow.png" id="4_asyxo"]
[ext_resource type="PackedScene" uid="uid://cvwyw3pb4offg" path="res://Scenes/thermal_cam.tscn" id="4_w2ys5"]
[ext_resource type="Texture2D" uid="uid://dud14eedw0p8q" path="res://Materials/Textures/arrow_dark.png" id="5_e25n4"]
[ext_resource type="Texture2D" uid="uid://chwalqev5dr2l" path="res://Materials/Textures/emergency_button.png" id="6_e4xj7"]
[ext_resource type="Texture2D" uid="uid://kokitp7fofei" path="res://Materials/Textures/clear.png" id="7_dk67e"]
[ext_resource type="Texture2D" uid="uid://y3vx4xeegvlf" path="res://Materials/Textures/checkerboard.png" id="7_edb8i"]
[ext_resource type="Texture2D" uid="uid://csb4pkebgupli" path="res://Materials/Textures/emergency_button_pressed.png" id="8_560rj"]

[sub_resource type="BoxShape3D" id="BoxShape3D_f2ahx"]
size = Vector3(1, 1, 0.310059)

[sub_resource type="Animation" id="Animation_7cofx"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:light_energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [2.0]
}

[sub_resource type="Animation" id="Animation_ye725"]
resource_name = "blink"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:light_energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [2.0, 0.0]
}

[sub_resource type="Animation" id="Animation_4pl3p"]
resource_name = "light_off"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:light_energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 0.0]
}

[sub_resource type="Animation" id="Animation_uol6u"]
resource_name = "light_on"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:light_energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [2.0, 2.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_3c3if"]
_data = {
"RESET": SubResource("Animation_7cofx"),
"blink": SubResource("Animation_ye725"),
"light_off": SubResource("Animation_4pl3p"),
"light_on": SubResource("Animation_uol6u")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_phdgl"]
animation = &"blink"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ogth0"]
animation = &"light_off"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_wbcv5"]
animation = &"light_on"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_262om"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8rvbe"]
advance_mode = 2
advance_condition = &"finished"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_w00uj"]
advance_mode = 2
advance_condition = &"blinking"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_s30ka"]
advance_mode = 2
advance_condition = &"opened"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_csjje"]
states/End/position = Vector2(579, 100)
states/Start/position = Vector2(189, 100)
states/blink/node = SubResource("AnimationNodeAnimation_phdgl")
states/blink/position = Vector2(464, 163)
states/light_off/node = SubResource("AnimationNodeAnimation_ogth0")
states/light_off/position = Vector2(319, 100)
states/light_on/node = SubResource("AnimationNodeAnimation_wbcv5")
states/light_on/position = Vector2(458, 47)
transitions = ["Start", "light_off", SubResource("AnimationNodeStateMachineTransition_262om"), "light_on", "light_off", SubResource("AnimationNodeStateMachineTransition_8rvbe"), "light_off", "blink", SubResource("AnimationNodeStateMachineTransition_w00uj"), "blink", "light_on", SubResource("AnimationNodeStateMachineTransition_s30ka")]

[sub_resource type="LabelSettings" id="LabelSettings_ylc6x"]
font_size = 64

[sub_resource type="LabelSettings" id="LabelSettings_ksroq"]
font_size = 30

[node name="InspectionFrame" type="Node3D"]
script = ExtResource("1_qncd1")

[node name="CSGBox3D" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.45)
material_override = ExtResource("2_j3l1x")
size = Vector3(1, 1, 0.1)

[node name="Area3D" type="Area3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.344971)
shape = SubResource("BoxShape3D_f2ahx")
disabled = true

[node name="Oscilloscope" parent="." instance=ExtResource("3_38jeh")]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0)
visible = false

[node name="ThermalCam" parent="." instance=ExtResource("4_w2ys5")]
transform = Transform3D(2, 0, 0, 0, -8.74228e-08, -2, 0, 2, -8.74228e-08, 0, 0, 0)
visible = false

[node name="CameraTarget" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.359538)

[node name="OmniLight3D" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.825142, -0.333681)
light_color = Color(1, 0, 0, 1)
light_energy = 2.0
shadow_enabled = true
omni_range = 2.0

[node name="AnimationPlayer" type="AnimationPlayer" parent="OmniLight3D"]
libraries = {
"": SubResource("AnimationLibrary_3c3if")
}

[node name="AnimationTree" type="AnimationTree" parent="OmniLight3D"]
libraries = {
"": SubResource("AnimationLibrary_3c3if")
}
tree_root = SubResource("AnimationNodeStateMachine_csjje")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/blinking = false
parameters/conditions/finished = false
parameters/conditions/opened = false

[node name="Control" type="Control" parent="."]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1

[node name="bg" type="Panel" parent="Control"]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -122.0
grow_horizontal = 2
grow_vertical = 0

[node name="Tools" type="Panel" parent="Control/bg"]
layout_mode = 1
anchors_preset = 13
anchor_left = 0.5
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -215.0
offset_right = 215.0
grow_horizontal = 2
grow_vertical = 2

[node name="ToolTray" type="TextureRect" parent="Control/bg/Tools"]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -76.0
offset_bottom = -1.0
grow_horizontal = 2
grow_vertical = 0
texture = ExtResource("3_gjsx4")
expand_mode = 1

[node name="OscButton" type="TextureButton" parent="Control/bg/Tools/ToolTray"]
layout_mode = 1
anchors_preset = 9
anchor_bottom = 1.0
offset_left = 29.0
offset_right = 109.0
grow_vertical = 2
keep_pressed_outside = true
texture_normal = ExtResource("7_edb8i")
texture_pressed = ExtResource("7_dk67e")
stretch_mode = 0

[node name="ThermButton" type="TextureButton" parent="Control/bg/Tools/ToolTray"]
layout_mode = 1
anchors_preset = 13
anchor_left = 0.5
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -42.0
offset_right = 42.0
grow_horizontal = 2
grow_vertical = 2
keep_pressed_outside = true
texture_normal = ExtResource("7_edb8i")
texture_pressed = ExtResource("7_dk67e")
stretch_mode = 0

[node name="AcoButton" type="TextureButton" parent="Control/bg/Tools/ToolTray"]
layout_mode = 1
anchors_preset = 11
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -106.0
offset_right = -24.0
grow_horizontal = 0
grow_vertical = 2
action_mode = 0
keep_pressed_outside = true
texture_normal = ExtResource("7_edb8i")
texture_pressed = ExtResource("7_dk67e")
stretch_mode = 0

[node name="ToolsText" type="Label" parent="Control/bg/Tools"]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_bottom = 50.0
grow_horizontal = 2
theme_override_font_sizes/font_size = 36
text = "TOOLS"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Timer" type="Panel" parent="Control/bg"]
layout_mode = 1
anchors_preset = 9
anchor_bottom = 1.0
offset_right = 361.0
grow_vertical = 2

[node name="Time" type="Label" parent="Control/bg/Timer"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 34.0
grow_horizontal = 2
grow_vertical = 2
text = "0:00"
label_settings = SubResource("LabelSettings_ylc6x")
horizontal_alignment = 1
vertical_alignment = 2

[node name="TimeToMeltdown" type="Label" parent="Control/bg/Timer"]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_bottom = 43.0
grow_horizontal = 2
text = "Time to Meltdown:"
label_settings = SubResource("LabelSettings_ksroq")
horizontal_alignment = 1

[node name="Jettison" type="Panel" parent="Control/bg"]
layout_mode = 1
anchors_preset = 11
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -361.0
grow_horizontal = 0
grow_vertical = 2

[node name="JettisonText" type="Label" parent="Control/bg/Jettison"]
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 69.0
offset_top = -24.0
offset_right = 194.0
offset_bottom = 26.0
grow_vertical = 2
theme_override_font_sizes/font_size = 36
text = "EJECT:"

[node name="JettisonButton" type="TextureButton" parent="Control/bg/Jettison"]
layout_mode = 1
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = -155.0
offset_top = -52.0
offset_right = -55.0
offset_bottom = 48.0
grow_horizontal = 0
grow_vertical = 2
texture_normal = ExtResource("6_e4xj7")
texture_pressed = ExtResource("8_560rj")
ignore_texture_size = true
stretch_mode = 0

[node name="LeftArrow" type="TextureButton" parent="Control"]
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 300.0
offset_top = -90.0
offset_right = 400.0
offset_bottom = 10.0
grow_vertical = 2
texture_normal = ExtResource("4_asyxo")
texture_pressed = ExtResource("5_e25n4")
ignore_texture_size = true
stretch_mode = 0

[node name="RightArrow" type="TextureButton" parent="Control"]
layout_mode = 1
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = -400.0
offset_top = -90.0
offset_right = -300.0
offset_bottom = 10.0
grow_horizontal = 0
grow_vertical = 2
texture_normal = ExtResource("4_asyxo")
texture_pressed = ExtResource("5_e25n4")
ignore_texture_size = true
stretch_mode = 0
flip_h = true

[connection signal="button_down" from="Control/bg/Tools/ToolTray/OscButton" to="." method="_on_osc_button_button_down"]
[connection signal="button_up" from="Control/bg/Tools/ToolTray/OscButton" to="." method="_on_osc_button_button_up"]
[connection signal="button_down" from="Control/bg/Tools/ToolTray/ThermButton" to="." method="_on_therm_button_button_down"]
[connection signal="button_up" from="Control/bg/Tools/ToolTray/ThermButton" to="." method="_on_therm_button_button_up"]
[connection signal="button_down" from="Control/bg/Tools/ToolTray/AcoButton" to="." method="_on_aco_button_button_down"]
[connection signal="button_up" from="Control/bg/Tools/ToolTray/AcoButton" to="." method="_on_aco_button_button_up"]
[connection signal="pressed" from="Control/bg/Jettison/JettisonButton" to="." method="_on_jettison_button_pressed"]
[connection signal="pressed" from="Control/LeftArrow" to="." method="_on_left_arrow_pressed"]
[connection signal="pressed" from="Control/RightArrow" to="." method="_on_right_arrow_pressed"]
